{% extends 'base.html' %}

{% block content %}
{% load static %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
    #profile_img {
        text-align: center;
    }
    
    #profile_name {
        display: flex;
        justify-content: center;
        font-size: 20px;
    }

    #social_media {
        margin-left: 30%;
    }

    #description {
        margin: 5px;
        text-align: center;
    }

    #description span {
        border-bottom: 1px solid grey ;
    }

    #detail_title {
        display:flex;
        padding:10px 10px 5px 10px;
        font-weight: bold;
    }

    #detail_content {
        padding:10px 20px 10px 10px;
    }

    #detail_image {
        margin: 20px 10px 20px 10px;
    }
    
    .nav {
        display: flex;
    }
    .nav .item {
        width: 140px;
        height: 50px;
        border-right: 1px solid #86e4e1;
        border-bottom: 1px solid #86e4e1;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }
    .nav .item:last-child {
        border-right: none;
    }
    .nav .item::before{
        content: "";
        width: 50px;
        height: 50px;
        background-color: #86e4e1;
        border-radius: 50%;
        position: absolute;
        transition: 0.3s;
    }
    .nav img {
        position: relative;
    }
    .nav .item.active::before{
        width: 150%;
        height: 150%;
    }
    .content {
        width: 100%;
        position: relative;
        padding-bottom:80px;
    }
    section{
        width:100%;
        display: flex;
        justify-content: center;
        align-items: center;
        position: absolute;
        opacity: 0;
        transition: opacity 0.4s;
        padding-bottom:80px;
    }
    section.active{
        opacity: 1;    
    }

    .subscribe-button {
        position: fixed;
        bottom: 80px; 
        right: 20px;
        padding: 5px 7px;
        font-family: inherit;
        font-size: inherit;
        font-weight: 500;
        color: white;
        background: #83da5ee6;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.16), 0 1px 2px rgba(0, 0, 0, 0.1);
        transition: background-color, box-shadow;
        transition-duration: 0.2s;
    }
    .subscribe-button:active {
        background: #de0000;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2), 0 1px 4px rgba(0, 0, 0, 0.14);
    }

    .subscribe-button.subbed {
        background: #777;
    }
    .subscribe-button.subbed svg {
        width: 16px;
    }
    .subscribe-button.subbed svg .plus__line1 {
        transform: translate(14px, 0) rotate(45deg) translate(-5px, 0) scaleY(1.1666666667);
    }
    .subscribe-button.subbed svg .plus__line2 {
        transform: translate(2px, 5px) rotate(45deg) scaleX(0.5) translate(0px, -5px);
    }
    .subscribe-button svg {
        display: inline-block;
        width: 12px;
        height: 12px;
        fill: white;
        transition: width 0.25s;
    }
    .subscribe-button svg .plus__line1,
    .subscribe-button svg .plus__line2 {
        transition: transform 0.25s;
    }
    .subscribe-button svg .plus__line1 {
        transform-origin: 0 0;
    }
    .subscribe-button svg .plus__line2 {
        transform-origin: 0 0;
    }
    .subscribe-button * {
        vertical-align: middle;
    }
</style>

{% if request.user == person %}
    <div id="profile_img" style="margin-top:30px;">
{% else %}
    {% if user in person.follower.all %}
    <a href="{% url 'follow' person.id %}">
    <div style="margin-left:85%; margin-top:15px;">
        <img src="{% static 'full_star.png' %}" width="30px" height="30px">
    </div>
    </a>
    {% else %}
    <a href="{% url 'follow' person.id %}">
    <div style="margin-left:85%; margin-top:15px;">
        <img src="{% static 'blank_star.png' %}" width="30px" height="30px">
    </div>
    </a>
    {% endif %}

<div id="profile_img">
{% endif %}

    {% if person.image %}
    <img src="{{person.image.url}}" alt="profile" width="100px" height="100px" style="object-fit:cover;border-radius: 100px;">
    {% else %}
    <img src="{% static 'profile_color.png' %}" alt="profile" width="100px" height="100px">
    {% endif %}
</div>

<div id="profile_name">
    <div style="margin-right:10px;">{{person.name}}</div>
    <div>
    {% if request.user == person %}
        {% if person.status == 0 %}
        <a href="{% url 'transition' %}">
            <img src="{% static 'no_check.png'%}" alt="no_check" width="20px" height="20px">
        </a>
        {% else %}
        <a href="{% url 'transition' %}">
            <img src="{% static 'yes_check.png'%}" alt="no_check" width="20px" height="20px">
        </a>
        {% endif %}
    {% else %}
        {% if person.status == 0 %}
            <img src="{% static 'no_check.png'%}" alt="no_check" width="20px" height="20px">
        {% else %}
            <img src="{% static 'yes_check.png'%}" alt="no_check" width="20px" height="20px">
        {% endif %}
    {% endif %}
    </div>
</div>

<div id="profile_detail" style="display:column; margin-top: 15px; font-size:14px; ">
    <div style="display: flex; justify-content: center; margin: 8px 0;">
        <img src="{% static 'instagram.png' %}" width="25" height="25" style="margin-right: 5px;">
        <div>{{person.insta}}</div>
    </div>
    <div style="display:flex; justify-content: center; margin: 8px 0;">
        <img src="{% static 'youtube.png' %}" width="25" height="25" style="margin-right: 5px;">
        <div>{{person.youtube}}</div>
    </div>
    <div style="padding-bottom: 5px; border-bottom:1px solid rgb(89, 88, 88); width:250px; display: flex; margin: 8px auto; justify-content: center;">
        {{person.intro}}
    </div>
</div>

{% if request.user == person %}
<a href="{% url 'edit'%}" >
    <button class="yellow_button" style="font-size:14px; display:flex; justify-content:center; margin: 15px auto; padding-top:7px;width:100px;height:33px;">
        프로필 편집
    </button>
</a>
{% endif %}

<div style="border-top: 1px solid #86e4e1;">
    <!--메뉴바-->
    <div class="nav">
        <div class="item active"><img src="{% static 'megaphone.png'%}" alt="posts" width="30px" height="30px"></div>
        <div class="item"><img src="{% static 'calendar.png'%}" alt="calendar" width="30px" height="30px"></div>
        {% if person.status == 0 %}
        <div class="item"><img src="{% static 'musician.png'%}" alt="review" width="30px" height="30px"></div>
        {% else %}
        <div class="item"><img src="{% static 'review.png'%}" alt="review" width="30px" height="30px"></div>
        {% endif %}
    </div>
    <!--내용-->
    <div class="content">
        <!--게시판-->
        <section class="active"><span>
            <div id="content_index" style="margin: 5px; border: solid 1px grey; ">
                <div id="detail_title">
                    {% if user.image %}
                    <img src="{{user.image.url}}" alt="profile" style="width:40px;height:40px">
                    {% else %}
                    <img src="{% static 'profile_color.png' %}" alt="profile" style="width:40px;height:40px">
                    {% endif %}
                    
                    <div style="align-self: center; padding-left: 10px;">{{user.name}}</div>
                
                    <div style="font-size:15px;margin-left:auto; align-self: center;">May 21, 2022 08:30pm</div>
                </div>
            
                <div id="detail_content">지금 신촌역 2분 출구 할리스 커피 앞에 무진님 깜짝 공연이 있어요!! 빨리 보러 오세요~~~</div>
                
                <div style="display:flex; margin: 10px;">
        
                    <img src = "{%static 'full_like.png'%}" alt="" width="30px" height="30px">
        
                    <div id ="like_count" style="padding-left: 15px; font-size: 25px;">3</div>
        
                    <button style="margin: 0 5px 0 151px; border-radius: 50px; background-color: #ff7e7e; width: 50px;">삭제</button>
                    <button style="border-radius: 50px; background-color: beige;width: 50px;">수정</button>
                </div>
            </div>
            {% if request.user == person %}
            <div>
                <a href="{% url 'new' %}" class="subscribe-button">
                    <svg xmlns="http://www.w3.org/2000/svg">
                    <g>
                        <rect class="plus__line1" width="2" height="12" x="5" y="0"></rect>
                        <rect class="plus__line2" width="12" height="2" x="0" y="5"></rect>
                    </g>
                    </svg>
                    <span class="subscribe-text">새 글</span>
                </a>
            </div>
            {% endif %}
        </span></section>

        <!--달력-->
        <section><span>달력
            <!--공연 등록-->
            {% if request.user == person %}
                {% if person.status == 1 %}
                <div>
                    <a href="{% url 'new' %}" class="subscribe-button">
                        <svg xmlns="http://www.w3.org/2000/svg">
                        <g>
                            <rect class="plus__line1" width="2" height="12" x="5" y="0"></rect>
                            <rect class="plus__line2" width="12" height="2" x="0" y="5"></rect>
                        </g>
                        </svg>
                        <span class="subscribe-text">공연 등록</span>
                    </a>
                </div>
                {% endif %}
            {% endif %}
        </span></section>

        <!--즐겨찾기-->
        {% if person.status == 0 %}
        <section><span><div>
            {% if request.user == person %}
                {% for person in people %}
                    {% if request.user in person.follower.all %}
                    <a href="{% url 'mypage' person.id %}">
                        <div id="content_index" style="display:flex; padding: 15px; border-bottom: solid 1px grey; ">
                        <div>
                        {% if person.image %}
                        <img src="{{person.image.url}}" alt="profile" width="100px" height="100px" style="object-fit:cover;border-radius: 100px;">
                        {% else %}
                        <img src="{% static 'profile_color.png' %}" alt="profile" width="100px" height="100px">
                        {% endif %}
                        </div>
                        <div>
                            <div style="align-self: center; padding:0 0 5px 10px;margin: 2px; font-weight: bold; font-size: large;">{{person.name}}</div>
                            <div style="align-self: center; padding-left: 10px;margin: 2px;">{{person.intro}}</div>
                        </div>
                    </div>
                    </a>
                    {% else %}
                    {% endif %}
                {% endfor %}
            {% else %}
            {% endif %}
        </div></span></section>
        {% else %}

        <!--후기-->
        <section><span>후기</span></section>
        {% endif %}
    </div>
</div>


<a href="{% url 'account_logout' %}" style="display:flex;justify-content: center;">
    <button class="yellow_button" style="font-size:14px; display:flex; justify-content:center; bottom:3px; margin: 30px auto; padding-top:7px;width:80px;height:33px;background-color: rgb(240, 100, 121);position: fixed;">로그아웃</button>
</a>

<script>
    const items=document.querySelectorAll('.item');
    const sections=document.querySelectorAll('section');

    function removeActive(){
        items.forEach(item=>{
            item.classList.remove('active');
        });

        sections.forEach(item=>{
            item.classList.remove('active');
        });
    }

    items.forEach((item,index)=>{
        item.addEventListener('click', function(){
            removeActive();
            item.classList.add('active');
            sections[index].classList.add('active');
        });
    })
</script>
{% endblock %}